<div [ngClass]="{'dark-theme': isDarkTheme | async}" class="mat-dialog-inner-container mat-app-background">

    <h2 mat-dialog-title>
        {{torrent.name}}
        <p></p>
        <mat-chip-list id="torrent-info-chip-list">
            <mat-chip color="primary" selected>{{state()}}</mat-chip>
            <mat-chip *ngIf="torrent.force_start" color="accent" selected>Forced Start</mat-chip>
        </mat-chip-list>
    </h2>

    <mat-dialog-content class="mat-typography torrent-info-container">
        <mat-tab-group mat-align-tabs="start">

            <mat-tab label="General">
                <div class="torrent-info-general-content">
                    <div class="leftPanel">
                        <p><b>Name:</b> {{torrent.name}}</p>
                        <p><b>Total Size:</b> {{total_size()}}</p>
                        <p><b>Downloaded:</b> {{downloaded()}} / {{total_size()}}</p>
                        <p><b>Save Location:</b> {{torrent.save_path}}</p>
                    </div>

                    <div class="rightPanel">
                        <p><b>Added On:</b> {{added_on()}}</p>
                        <p><b>Completed On:</b> {{completed_on()}}</p>
                        <p><b>Last Activity:</b> {{last_activity()}}</p>
                    </div>

                </div>
            </mat-tab>

            <mat-tab>
              <ng-template matTabLabel>
                <span matBadge="{{torrentContents.length}}" matBadgeColor="accent" matBadgeOverlap="false">Files</span>
              </ng-template>
                <div class="torrent-info-content-content">
                  <mat-accordion *ngIf="!isLoading" multi="true">
                    <mat-expansion-panel *ngFor="let content of torrentContents" [expanded]="isPanelOpen(content.name)"
                                          (opened)="openPanel(content.name)" (closed)="closePanel(content.name)">
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          {{content.name}}
                        </mat-panel-title>
                        <mat-panel-description>
                          Downloaded: {{(content.progress * 100).toFixed(2)}}%
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                    </mat-expansion-panel>
                  </mat-accordion>

                  <mat-spinner *ngIf="isLoading"></mat-spinner>
                </div>
            </mat-tab>

        </mat-tab-group>

    </mat-dialog-content>

    <mat-dialog-actions align="end">
    <button mat-button [mat-dialog-close]="true">Close</button>
    </mat-dialog-actions>

</div>
